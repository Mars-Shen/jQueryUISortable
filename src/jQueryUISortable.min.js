!function(a){"function"==typeof define&&define.amd?define(["jquery","jqueryui"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b="sorttable",c="v0.0.2",d={onlineMode:!1,saveURL:"",deleteURL:"",activeURL:"",blockfunction:function(){},unblockfunction:function(){},valueNotNull:!0,keyValueMode:!0,enableNewItem:!1,defaultNewItemKey:"NK",defaultNewItemText:"new value",sortJsonData:[],activeButton:!0,inlineActiveButton:!1,activeButtonText:"Active/Inactive",batchMode:!0,editButton:!0,editButtonText:"Edit",saveButtonText:"Save",cancelButtonText:"Cancel",addButton:!0,addButtonText:"Add",deleteButton:!0,inlineDeleteButton:!1,deleteButtonText:"Delete",saveOrderButton:!0,saveOrderButtonText:"Save Order",submitCallBack:function(){},deleteCallBack:function(a){return confirm("Do you want to delete this record(s)")},buttonClass:""},e=function(e,f){this.element=e,this.elementId=a(e).attr("id"),this.buttonElements=null,this.tableBodyElement=null,this.sortableObj=null,this.startIndex=0,this.options=a.extend({},d,f),this.activedData=[],this.inactivedData=[],this.newAddedItemsArr=[],this.deletedItemsArr=[],this.isEditMode=!1,this.selectNumber=0,this._defaults=d,this._name=b,this._version=c,this.init()};e.prototype={init:function(){"undefined"!=typeof this.sortableObj&&null!==this.sortableObj&&(this.sortableObj.sortable("destroy"),this.sortableObj=null),this.buildSortHTML(),this.buildSortTable(),this.refreshData();var b=this;a(this.element).off("click","#"+this.elementId+"_saveOrder").on("click","#"+this.elementId+"_saveOrder",function(c){a(this).hasClass("btn-inactive")||("function"==typeof b.options.submitCallBack?b.options.submitCallBack(c):a.error("SubmitCallBack "+b.options.submitCallBack+" is not a function!"))}),a(this.element).off("click","."+this.elementId+"_acitveInactiveItem").on("click","."+this.elementId+"_acitveInactiveItem",function(c){a(this).hasClass("btn-inactive")||b.activeInactiveFunction(c,!1)}),a(this.element).off("click","#"+this.elementId+"_acitveInactiveItems").on("click","#"+this.elementId+"_acitveInactiveItems",function(c){a(this).hasClass("btn-inactive")||b.activeInactiveFunction(c,!0)}),a(this.element).off("click","."+this.elementId+"_editItem").on("click","."+this.elementId+"_editItem",function(a,c){b.editFunction(a,c)}),a(this.element).off("click","."+this.elementId+"_saveItem").on("click","."+this.elementId+"_saveItem",function(a,c){b.saveFunction(a,c)}),a(this.element).off("click","."+this.elementId+"_deleteItem").on("click","."+this.elementId+"_deleteItem",function(c,d){a(this).hasClass("btn-inactive")||b.deleteFunction(c,!1)}),a(this.element).off("click","#"+this.elementId+"_deleteItems").on("click","#"+this.elementId+"_deleteItems",function(c,d){a(this).hasClass("btn-inactive")||b.deleteFunction(c,!0)}),a(this.element).off("click","."+this.elementId+"_cancelItem").on("click","."+this.elementId+"_cancelItem",function(a,c){b.cancelFunction(a,c)}),a(this.element).off("click","#"+this.elementId+"_addItem").on("click","#"+this.elementId+"_addItem",function(){a(this).hasClass("btn-inactive")||b.addItemFunction()}),a(this.element).off("click","input[type='checkbox']").on("click","input[type='checkbox']",function(){var c=a(b.element).find("tr .td_sortable_checkbox"),d=a(b.element).find(".checkAll");a(this).hasClass("checkAll")?(a.each(c,function(){d.prop("checked")?a(this).prop("checked",!0):a(this).prop("checked",!1)}),a(this).prop("checked")?b.selectNumber=c.length:b.selectNumber=0):a(this).prop("checked")?(b.selectNumber++,c.length==b.selectNumber&&d.prop("checked",!0)):(b.selectNumber--,d.prop("checked")&&d.prop("checked",!1)),b.batchModeButtonStatus()})},buildSortHTML:function(){var b=a(this.element);b.empty();var c=a('<ul id="ul_'+this.elementId+'"></ul>');c.addClass("action-menu"),c.addClass("sortable_button_group_default"),this.buttonElements=c,b.append(c),this.options.activeButton&&this.options.batchMode&&c.append(a(this.getButtonHtml("acts"))),this.options.addButton&&c.append(a(this.getButtonHtml("add"))),this.options.deleteButton&&this.options.batchMode&&c.append(a(this.getButtonHtml("dels"))),this.options.saveOrderButton&&c.append(a(this.getButtonHtml("sub")));var d=a('<table class="table responsivetable sortable_div_container" id="table_'+this.elementId+'"></table>'),e=a('<thead id="table_head_'+this.elementId+'" class="sortable_Thead_Style"></thead>'),f=a('<tr class="sortable_Thead_Tr_Style"></tr>');if(e.append(f),d.append(e),this.options.batchMode){var g=a('<th class="sortable_CheckBox_Style"><div><input type="checkbox" class="checkAll" id="check_all_'+this.elementId+'"/></div></th>');f.append(g)}var h="";h=this.options.keyValueMode?'<th class="sortable_Code_Style">Code</th><th class="sortable_Descrption_Style">Descrption</th>':'<th class="sortable_Descrption_Style">Descrption</th>';var i=a('<th class="sortable_CheckBox_Style">No.</th>'+h+'<th class="sortable_Operation_Style">Operation</th>');f.append(i);var j=a('<tbody id="table_body_'+this.elementId+'"  class="sortable_Tbody_Style"></tbody>');d.append(j),this.tableBodyElement=j,b.append(d),this.prepareModelData()},buildSortTable:function(){var b=this,c={axis:"y",cursor:"s-resize",opacity:.8,stop:function(a,c){b.recordNewOrder(),b.refreshData(),c.item.removeAttr("style")}};this.sortableObj=a(this.tableBodyElement).sortable(c)},recordNewOrder:function(){var b=[],c=this,d=1;a.each(a(this.element).find("tr .hid_sortable_id"),function(e,f){a.each(c.options.sortJsonData,function(c,e){a(f).val()==e.id&&(e.index=d++,b.push(e))})}),this.options.sortJsonData=b},refreshData:function(){this.activedData=[],this.inactivedData=[];var b=[],c=a(this.tableBodyElement),d=this.activedData,e=this.inactivedData,f=this;return a.each(this.options.sortJsonData,function(g,h){var i=a.trim(h.value),j=a.trim(h.key),k=a.trim(h.id),l=h.isActiveFlag,m=a.trim(h.index),n=a(f.element).find("#tr_sortable_item_"+f.elementId+"_"+k);if(0==n.length){var o="";o=f.options.keyValueMode?'<td class="sortable_Code_Style" title="'+j+'"><span class="sortable_read_only_key">'+j+'</span><input type="text" class="hid_sortable_key sortable_text_key hide" id="hid_sortable_key_'+k+'" value="'+j+'" /></td><td class="sortable_Descrption_Style" title="'+i+'"><span class="sortable_read_only_text">'+i+'</span><input type="text" class="hid_sortable_value sortable_text_value hide" id="hid_sortable_value_'+k+'" value="'+i+'"/></td>':'<td class="sortable_Descrption_Style" title="'+i+'"><span class="sortable_read_only_text">'+i+'</span><input type="text" class="hid_sortable_value sortable_text_value hide" id="hid_sortable_value_'+k+'" value="'+i+'"/></td>';var p="",q="",r="",s="",t="",u="";f.options.editButton&&(p=f.getButtonHtml("edi"),q=f.getButtonHtml("sav"),r=f.getButtonHtml("can")),f.options.deleteButton&&f.options.inlineDeleteButton&&(s=f.getButtonHtml("del")),f.options.activeButton&&f.options.inlineActiveButton&&(t=f.getButtonHtml("act")),f.options.batchMode&&(u='<td class="sortable_CheckBox_Style"><input type="checkbox" class="td_sortable_checkbox" id="td_sortable_checkbox_'+k+'"/></td>');var v=a('<tr class="ui-state-default sortable_Tbody_Tr_Style" id="tr_sortable_item_'+f.elementId+"_"+k+'">'+u+'<td class="sortable_index sortable_CheckBox_Style">'+m+"</td>"+o+'<td class="sortable_Operation_Style">'+p+q+r+s+t+'<input type="hidden" class="hid_sortable_id" id="hid_sortable_id_'+k+'" value="'+k+'"/></td></tr>');c.append(v),b.push(v),n=a(f.element).find("#tr_sortable_item_"+f.elementId+"_"+k)}if(f.options.keyValueMode){var w=n.find(".hid_sortable_key");j!=w.val()&&w.val(j);var x=n.find(".sortable_read_only_key");x.html(j),x.parents("td").attr("title",j)}var y=n.find(".hid_sortable_value");i!=y.val()&&y.val(i);var z=n.find(".sortable_read_only_text");z.html(i),z.parents("td").attr("title",i);var A=n.find(".sortable_index");m!=A.html()&&A.html(m),l?(d.push(a("#tr_sortable_item_"+f.elementId+"_"+k)),n.removeClass("ui-state-disabled")):(e.push(a("#tr_sortable_item_"+f.elementId+"_"+k)),n.addClass("ui-state-disabled")),n.addClass("sortable-processed")}),a(this.tableBodyElement).find("tr").remove(":not(.sortable-processed)"),a(this.tableBodyElement).find("tr").removeClass("sortable-processed"),this.refreshItemsDisplay(),b},getOrSetModelData:function(b){if("undefined"==typeof b||null===b){var c=JSON.parse(JSON.stringify({sortJsonData:this.options.sortJsonData,activedData:this.activedData,inactivedData:this.inactivedData,newAddedItems:this.newAddedItemsArr,deletedItems:this.deletedItemsArr}));return this.newAddedItemsArr=[],this.deletedItemsArr=[],c}this.options=a.extend({},this.options,b),this.init()},activeInactiveFunction:function(b,c){var d=this;if(c){var i=this.getSelectItems(),j=i.checkedItems,k=[],l=[];a.each(j,function(b,c){var e=d.findDataFromModel(a.trim(c.find(".hid_sortable_id").val()));if(k.push(e),l[b]=JSON.stringify(e),!d.options.onlineMode||""==d.options.activeURL){var f=e.isActiveFlag;f?e.isActiveFlag=!1:e.isActiveFlag=!0}}),this.options.onlineMode&&""!=this.options.activeURL?(this.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{activeInactiveRecord:l},url:d.options.activeURL,complete:function(){d.options.unblockfunction()},success:function(b){"success"==b.status?(a.each(k,function(a,b){var c=b.isActiveFlag;c?b.isActiveFlag=!1:b.isActiveFlag=!0}),d.refreshData()):b.message&&alert(b.message)}})):this.refreshData()}else{var e=a(b.target).parents("tr");if("undefined"!=typeof e&&null!==e){var f=this.findDataFromModel(a.trim(e.find(".hid_sortable_id").val()));if(this.options.onlineMode&&""!=this.options.activeURL){this.options.blockfunction();var g=[];g[0]=JSON.stringify(f),a.ajax({type:"POST",dataType:"json",data:{activeActionRecord:g},url:d.options.activeURL,complete:function(){d.options.unblockfunction()},success:function(a){if("success"==a.status){var b=f.isActiveFlag;b?f.isActiveFlag=!1:f.isActiveFlag=!0}else a.message&&alert(a.message);d.refreshData()}})}else{var h=f.isActiveFlag;h?f.isActiveFlag=!1:f.isActiveFlag=!0,this.refreshData()}}}},getSelectItems:function(){var b=a(this.element).find("tr .td_sortable_checkbox"),c=[],d=[];return a.each(b,function(b,e){a(e).prop("checked")?c.push(a(e).parents("tr")):d.push(a(e).parents("tr"))}),{checkedItems:c,uncheckedItems:d}},findDataFromModel:function(b){var c=null;return a.each(this.options.sortJsonData,function(a,d){return d.id==b?(c=d,!1):void 0}),c},editFunction:function(b,c){this.isEditMode=!0,this.changeEditModeButtonsStatus(b);var d=null;d=a(b).is("tr")?a(b):a(b.target).parents("tr");var e=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));d.find(".hid_sortable_value").val(e.value),d.find(".sortable_read_only_text").hide(),d.find(".hid_sortable_value").show().removeClass("hide"),this.options.keyValueMode&&(d.find(".hid_sortable_key").val(e.key),d.find(".sortable_read_only_key").hide(),d.find(".hid_sortable_key").show().removeClass("hide"))},saveFunction:function(b,c){var d=a(b.target).parents("tr");if("undefined"!=typeof d&&null!==d){var e=a.trim(d.find(".hid_sortable_value").val()),f=a.trim(d.find(".hid_sortable_key").val()),g=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));if(this.options.onlineMode&&""!=this.options.saveURL){var h=g.key,i=g.value;g.value=e,g.key=f;var j=this;this.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{saveRecord:JSON.stringify(g)},url:j.options.saveURL,complete:function(){j.options.unblockfunction()},success:function(a){"success"==a.status?(d.find(".hid_sortable_value").val(g.value),d.find(".sortable_read_only_text").show().removeClass("hide"),d.find(".hid_sortable_value").hide().addClass("hide"),j.options.keyValueMode&&(d.find(".hid_sortable_key").val(g.key),d.find(".sortable_read_only_key").show().removeClass("hide"),d.find(".hid_sortable_key").hide().addClass("hide")),j.isEditMode=!1,j.changeEditModeButtonsStatus(b),j.refreshData(),g.newAddedFlag&&(j.newAddedItemsArr.push(g),delete g.newAddedFlag),alert("Update sucessful!")):(g.value=i,g.key=h,a.message&&alert(a.message))}})}else this.isEditMode=!1,this.changeEditModeButtonsStatus(b),g.value=e,g.key=f,d.find(".hid_sortable_value").val(g.value),d.find(".sortable_read_only_text").show().removeClass("hide"),d.find(".hid_sortable_value").hide().addClass("hide"),this.options.keyValueMode&&(d.find(".hid_sortable_key").val(g.key),d.find(".sortable_read_only_key").show().removeClass("hide"),d.find(".hid_sortable_key").hide().addClass("hide")),this.refreshData(),g.newAddedFlag&&(this.newAddedItemsArr.push(g),delete g.newAddedFlag)}},cancelFunction:function(b,c){this.isEditMode=!1,this.changeEditModeButtonsStatus(b);var d=null;if(d=a(b).is("tr")?a(b):a(b.target).parents("tr"),"undefined"!=typeof d&&null!==d){var e=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));e.newAddedFlag?(this.deleteDataFromModel(e.id),d.remove()):(d.find(".hid_sortable_value").val(e.value),d.find(".sortable_read_only_text").show().removeClass("hide"),d.find(".hid_sortable_value").hide().addClass("hide"),this.options.keyValueMode&&(d.find(".hid_sortable_key").val(e.key),d.find(".sortable_read_only_key").show().removeClass("hide"),d.find(".hid_sortable_key").hide().addClass("hide")))}this.refreshData()},deleteDataFromModel:function(a){for(var b=-1,c=0;c<this.options.sortJsonData.length;c++)if(this.options.sortJsonData[c].id==a){b=c;break}b>=0&&this.options.sortJsonData.splice(b,1)},deleteFunction:function(b,c){var d=this;if("function"==typeof this.options.deleteCallBack){if(this.options.deleteCallBack(this.selectedItem))if(c){var i=this.getSelectItems(),j=i.checkedItems,k=[],l=[];a.each(j,function(b,c){var e=d.findDataFromModel(a.trim(c.find(".hid_sortable_id").val()));if(k.push(e),l[b]=JSON.stringify(e),!d.options.onlineMode||""==d.options.deleteURL){d.deleteDataFromModel(e.id),c.remove();var f=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==e.id?(d.newAddedItemsArr.splice(a,1),f=!0,!1):void 0}),f||d.deletedItemsArr.push(e)}}),this.options.onlineMode&&""!=this.options.deleteURL?(this.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{deleteRecord:l},url:d.options.deleteURL,complete:function(){d.options.unblockfunction()},success:function(b){"success"==b.status?(a.each(k,function(b,c){d.deleteDataFromModel(c.id),a("#tr_sortable_item_"+d.elementId+"_"+c.id).remove();var e=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==c.id?(d.newAddedItemsArr.splice(a,1),e=!0,!1):void 0}),e||d.deletedItemsArr.push(c)}),d.recordNewOrder(),d.refreshData(),alert("Delete sucessful!")):b.message&&alert(b.message)}})):(d.recordNewOrder(),d.refreshData()),this.selectNumber=0,this.batchModeButtonStatus()}else{var e=a(b.target).parents("tr");if("undefined"!=typeof e&&null!==e){var f=this.findDataFromModel(a.trim(e.find(".hid_sortable_id").val()));if(this.options.onlineMode&&""!=this.options.deleteURL){this.options.blockfunction();var g=[];g[0]=JSON.stringify(f),a.ajax({type:"POST",dataType:"json",data:{deleteRecord:g},url:d.options.deleteURL,complete:function(){d.options.unblockfunction()},success:function(b){if("success"==b.status){d.deleteDataFromModel(f.id),e.remove();var c=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==f.id?(d.newAddedItemsArr.splice(a,1),c=!0,!1):void 0}),c||d.deletedItemsArr.push(f),d.recordNewOrder(),d.refreshData(),e=null,alert("Delete sucessful!")}else b.message&&alert(b.message)}})}else{this.deleteDataFromModel(f.id),e.remove();var h=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==f.id?(d.newAddedItemsArr.splice(a,1),h=!0,!1):void 0}),h||this.deletedItemsArr.push(f),d.recordNewOrder(),this.refreshData(),this.selectedItem=null}}}}else a.error("DeleteCallBack "+this.options.deleteCallBack+" is not a function!")},addItemFunction:function(){var b=this.startIndex;b<this.options.sortJsonData.length&&(b=this.options.sortJsonData.length);var c=++b,d=this.getOneItemJsonObj(this.options.defaultNewItemKey,this.options.sortJsonData.length+1,c,this.options.enableNewItem,this.options.defaultNewItemText,!0);this.options.sortJsonData.push(d);var e=this.refreshData();this.editFunction(e[0]),this.startIndex=b,a(this.tableBodyElement).animate({scrollTop:"800px"},300)},getOneItemJsonObj:function(a,b,c,d,e,f){return{index:b,id:c,key:a,isActiveFlag:d,value:e,newAddedFlag:f}},batchModeButtonStatus:function(){this.selectNumber>0?this.enableBatchButtonDelegate():this.disableBatchJobButtonDelegate()},changeEditModeButtonsStatus:function(a){this.isEditMode?this.enterEditModeButtonsStatusDelegate(a):this.exitEditModeButtonsStatusDelegate(a)},refreshItemsDisplay:function(){this.sortableObj.sortable("option","items","tr"),this.sortableObj.sortable("refresh")},getButtonHtml:function(a){var b="",c="sortable_button_default btn "+this.options.buttonClass;switch(a){case"acts":b='<li><input type="button" class="btn-inactive '+c+'" id="'+this.elementId+'_acitveInactiveItems" value="'+this.options.activeButtonText+'"/></li>';break;case"act":b='<input type="button" class="btn-primary '+this.elementId+"_acitveInactiveItem "+c+'" value="'+this.options.activeButtonText+'"/>';break;case"add":b='<li><input type="button" class="btn-primary '+c+'" id="'+this.elementId+'_addItem" value="'+this.options.addButtonText+'"/></li>';break;case"dels":b='<li><input type="button" class="btn-inactive '+c+'" id="'+this.elementId+'_deleteItems" value="'+this.options.deleteButtonText+'"/></li>';break;case"del":b='<input type="button" class="btn-primary '+this.elementId+"_deleteItem "+c+'" value="'+this.options.deleteButtonText+'"/>';break;case"sub":b='<li><input type="button" class="btn-primary '+c+'" id="'+this.elementId+'_saveOrder" value="'+this.options.saveOrderButtonText+'"/></li>';break;case"edi":b='<input type="button" class="btn-primary '+this.elementId+"_editItem "+c+'" value="'+this.options.editButtonText+'"/>';break;case"sav":b='<input type="button" class="btn-primary '+this.elementId+"_saveItem hide "+c+'" value="'+this.options.saveButtonText+'"/>';break;case"can":b='<input type="button" class="btn-primary '+this.elementId+"_cancelItem hide "+c+'" value="'+this.options.cancelButtonText+'"/>'}return b},prepareModelData:function(){var b=0,c=1;this.options.sortJsonData.sort(this.sortBy("index",!1,parseInt)),a.each(this.options.sortJsonData,function(a,d){d.id=b++,d.index=c++}),this.startIndex=b},enterEditModeButtonsStatusDelegate:function(b){a(b).is("tr")?(a(b).find("."+this.elementId+"_saveItem").show().removeClass("hide"),a(b).find("."+this.elementId+"_cancelItem").show().removeClass("hide"),a(b).find("."+this.elementId+"_deleteItem").hide().addClass("hide"),a(b).find("."+this.elementId+"_acitveInactiveItem").hide().addClass("hide"),a(b).find("."+this.elementId+"_editItem").hide().addClass("hide")):(a(b.target).parents("td").find("."+this.elementId+"_saveItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_cancelItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_deleteItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_acitveInactiveItem").hide().addClass("hide"),a(b.target).hide().addClass("hide"))},exitEditModeButtonsStatusDelegate:function(b){a(b.target).parents("td").find("."+this.elementId+"_saveItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_cancelItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_editItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_deleteItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_acitveInactiveItem").show().removeClass("hide")},enableBatchButtonDelegate:function(){a("#"+this.elementId+"_acitveInactiveItems").removeClass("btn-inactive").addClass("btn-primary"),a("#"+this.elementId+"_deleteItems").removeClass("btn-inactive").addClass("btn-primary")},disableBatchJobButtonDelegate:function(){a("#"+this.elementId+"_deleteItems").addClass("btn-inactive").removeClass("btn-primary"),a("#"+this.elementId+"_acitveInactiveItems").addClass("btn-inactive").removeClass("btn-primary")},sortBy:function(a,b,c){return b=b?-1:1,function(d,e){return d=d[a],e=e[a],"undefined"!=typeof c&&(d=c(d),e=c(e)),e>d?-1*b:d>e?1*b:1}}};var f=function(a,b){"undefined"!=typeof a&&null!==a&&a.length>1&&(a[1].options[b]=a[0])},g=function(a,b){return"undefined"!=typeof a&&null!==a?a.length>1?a[1][b].call(a[1],a[0]):a[0][b].call(a[0]):void 0},h={Destroy:function(){var c=a.data(this,"plugin_"+b);c&&(a(c.element).empty(),a.removeData(this,"plugin_"+b))},ModelData:function(){var a=arguments;return g(a,"getOrSetModelData")},SubmitCallback:function(){var a=arguments;f(a,"submitCallBack")},DeleteCallBack:function(){var a=arguments;f(a,"deleteCallBack")}};a.fn[b]=function(){var c=arguments,d=null;return this.each(function(){if(a.data(this,"plugin_"+b)){var f=c[0];if(h[f])f=h[f],arguments=Array.prototype.slice.call(c,1),arguments.push(a.data(this,"plugin_"+b)),d=f.apply(this,arguments);else if("object"!=typeof f&&f)return a.error("Method"+f+"does not exist on jQuery."+b),this}else a.data(this,"plugin_"+b,new e(this,c[0]))}),"undefined"!=typeof d&&null!==d?d:this}});