!function(a){"function"==typeof define&&define.amd?define(["jquery","jqueryui"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b="jSortable",c="v0.0.3",d={onlineMode:!1,autoSave:!0,saveURL:"",deleteURL:"",activeURL:"",saveOrderURL:"",blockfunction:function(){},unblockfunction:function(){},groupMode:!0,groupAcitveText:"Active Items",groupInacitveText:"Inactive Items",valueNotNull:!0,keyValueMode:!0,enableNewItem:!0,defaultNewItemKey:"",defaultNewItemText:"",sortJsonData:[],activeButton:!0,inlineActiveButton:!1,activeButtonText:"Active",deactiveButtonText:"Deactive",batchMode:!0,editButton:!0,editButtonText:"Edit",saveButtonText:"Save",cancelButtonText:"Cancel",addButton:!0,addButtonText:"Add",deleteButton:!0,inlineDeleteButton:!1,deleteButtonText:"Delete",saveOrderButton:!0,saveOrderButtonText:"Save",submitCallBack:function(){},deleteCallBack:function(a){confirm("Do you want to delete this record(s)")&&a()},buttonClass:"",descrptionText:"Descrption",codeText:"Code",operationText:"Operation",noText:"No.",maxCodeLength:50,maxDescriptionLength:50},e=function(e,f){this.element=e,this.elementId=a(e).attr("id"),this.buttonElements=null,this.tableBodyElement=null,this.tableBodyInactiveElement=null,this.sortableObj=null,this.startIndex=0,this.options=a.extend({},d,f),this.activedData=[],this.inactivedData=[],this.newAddedItemsArr=[],this.deletedItemsArr=[],this.isEditMode=!1,this.selectNumber=0,this._defaults=d,this._name=b,this._version=c,this.init()};e.prototype={init:function(){"undefined"!=typeof this.sortableObj&&null!==this.sortableObj&&(this.sortableObj.sortable("destroy"),this.sortableObj=null),this.buildSortHTML(),this.buildSortTable(),this.refreshData();var b=this;a(this.element).off("click","#"+this.elementId+"_saveOrder").on("click","#"+this.elementId+"_saveOrder",function(c){a(this).hasClass("btn-inactive")||b.saveOrderFunction(c)}),a(this.element).off("click","."+this.elementId+"_acitveInactiveItem").on("click","."+this.elementId+"_acitveInactiveItem",function(c){a(this).hasClass("btn-inactive")||b.activeInactiveFunction(c,!1)}),a(this.element).off("click","#"+this.elementId+"_acitveInactiveItems").on("click","#"+this.elementId+"_acitveInactiveItems",function(c){a(this).hasClass("btn-inactive")||b.activeInactiveFunction(c,!0)}),a(this.element).off("click","."+this.elementId+"_editItem").on("click","."+this.elementId+"_editItem",function(a,c){b.editFunction(a,c)}),a(this.element).off("click","."+this.elementId+"_saveItem").on("click","."+this.elementId+"_saveItem",function(a,c){b.saveFunction(a,c)}),a(this.element).off("click","."+this.elementId+"_deleteItem").on("click","."+this.elementId+"_deleteItem",function(c,d){a(this).hasClass("btn-inactive")||b.deleteFunction(c,!1)}),a(this.element).off("click","#"+this.elementId+"_deleteItems").on("click","#"+this.elementId+"_deleteItems",function(c,d){a(this).hasClass("btn-inactive")||b.deleteFunction(c,!0)}),a(this.element).off("click","."+this.elementId+"_cancelItem").on("click","."+this.elementId+"_cancelItem",function(a,c){b.cancelFunction(a,c)}),a(this.element).off("click","#"+this.elementId+"_addItem").on("click","#"+this.elementId+"_addItem",function(){a(this).hasClass("btn-inactive")||b.addItemFunction()}),a(this.element).off("click","#"+this.elementId+"_tab-active-li").on("click","#"+this.elementId+"_tab-active-li",function(){a(this).parent().hasClass("r-tabs-state-active")||b.groupButtonClick(!0)}),a(this.element).off("click","#"+this.elementId+"_tab-inactive-li").on("click","#"+this.elementId+"_tab-inactive-li",function(){a(this).parent().hasClass("r-tabs-state-active")||b.groupButtonClick(!1)}),a(this.element).off("click","input[type='checkbox']").on("click","input[type='checkbox']",function(){var c=a(b.element).find("tr .td_sortable_checkbox"),d=a(b.element).find(".checkAll");if(a(this).hasClass("checkAll")?(a.each(c,function(){d.prop("checked")?a(this).prop("checked",!0):a(this).prop("checked",!1)}),a(this).prop("checked")?b.selectNumber=c.length:b.selectNumber=0):a(this).prop("checked")?(b.selectNumber++,c.length==b.selectNumber&&d.prop("checked",!0)):(b.selectNumber--,d.prop("checked")&&d.prop("checked",!1)),b.options.groupMode){var e=a(b.element).find("tr .td_sortable_checkbox_inactive"),f=a(b.element).find(".checkAll_inactive");a(this).hasClass("checkAll_inactive")?(a.each(e,function(){f.prop("checked")?a(this).prop("checked",!0):a(this).prop("checked",!1)}),a(this).prop("checked")?b.selectNumber=e.length:b.selectNumber=0):a(this).prop("checked")?(b.selectNumber++,e.length==b.selectNumber&&f.prop("checked",!0)):(b.selectNumber--,f.prop("checked")&&f.prop("checked",!1))}b.batchModeButtonStatus()})},buildSortHTML:function(){var b=a(this.element);b.empty();var c=a('<div id="jSortable_ErrorMsg_'+this.elementId+'" class="omdwebErrorMsg" style="display:none;"><button type="button" class="errorCloseBtn close" data-dismiss="alert" value="Close"><span>X</span></button><p id="jSortable_AlertTitle_'+this.elementId+'"></p><ul id="jSortable_AlertBody_'+this.elementId+'"></ul></div>'),d=a('<div id="jSortable_SuccessMsg_'+this.elementId+'" class="omdwebSuccessMsg" style="display:none;"><button type="button" class="errorCloseBtn close" data-dismiss="alert" value="Close"><span>X</span></button><p id="jSortable_SuccessTitle_'+this.elementId+'"></p><ul id="jSortable_SuccessBody_'+this.elementId+'"></ul></div>');b.append(c),b.append(d);var e=a('<ul id="ul_'+this.elementId+'"></ul>');if(e.addClass("action-menu"),e.addClass("sortable_button_group_default"),this.buttonElements=e,b.append(e),this.options.activeButton&&this.options.batchMode&&e.append(a(this.getButtonHtml("acts"))),this.options.addButton&&e.append(a(this.getButtonHtml("add"))),this.options.deleteButton&&this.options.batchMode&&e.append(a(this.getButtonHtml("dels"))),this.options.saveOrderButton&&e.append(a(this.getButtonHtml("sub"))),this.options.groupMode){var f=a('<ul id="ul_group_'+this.elementId+'"></ul>');f.addClass("r-tabs-nav");var g=a('<li class="r-tabs-tab r-tabs-state-active"></li>'),h=a('<a class="r-tabs-anchor" id="'+this.elementId+'_tab-active-li" href="javascript:void(0)" onclick="">'+this.options.groupAcitveText+"</a>");g.append(h),f.append(g);var i=a('<li class="r-tabs-state-default r-tabs-tab"></li>'),j=a('<a class="r-tabs-anchor" id="'+this.elementId+'_tab-inactive-li" href="javascript:void(0)" onclick="">'+this.options.groupInacitveText+"</a>");i.append(j),f.append(i),b.append(f)}var k=a('<table class="table responsivetable sortable_div_container" id="table_'+this.elementId+'"></table>'),l=a('<thead id="table_head_'+this.elementId+'" class="sortable_Thead_Style"></thead>'),m=a('<tr class="sortable_Thead_Tr_Style"></tr>');if(l.append(m),k.append(l),this.options.batchMode){var n=a('<th class="sortable_CheckBox_Style"><div><input type="checkbox" class="checkAll" id="check_all_'+this.elementId+'"/></div></th>');m.append(n)}var o="";o=this.options.keyValueMode?'<th class="sortable_Code_Style">'+this.options.codeText+'</th><th class="sortable_Descrption_Style">'+this.options.descrptionText+"</th>":'<th class="sortable_Descrption_only_Style">'+this.options.descrptionText+"</th>";var p=a('<th class="sortable_CheckBox_Style">'+this.options.noText+"</th>"+o+'<th class="sortable_Operation_Style">'+this.options.operationText+"</th>");m.append(p);var q=a('<tbody id="table_body_'+this.elementId+'"  class="sortable_Tbody_Style"></tbody>');if(k.append(q),this.tableBodyElement=q,b.append(k),this.options.groupMode){var r=a('<table class="table responsivetable sortable_div_container" id="table_'+this.elementId+'_inactive"></table>'),s=a('<thead id="table_head_'+this.elementId+'_inactive" class="sortable_Thead_Style"></thead>'),t=a('<tr class="sortable_Thead_Tr_Style"></tr>');if(s.append(t),r.append(s),this.options.batchMode){var u=a('<th class="sortable_CheckBox_Style"><div><input type="checkbox" class="checkAll_inactive" id="check_all_'+this.elementId+'"/></div></th>');t.append(u)}var v="";v=this.options.keyValueMode?'<th class="sortable_Code_Style">'+this.options.codeText+'</th><th class="sortable_Descrption_Style">'+this.options.descrptionText+"</th>":'<th class="sortable_Descrption_only_Style">'+this.options.descrptionText+"</th>";var w=a('<th class="sortable_CheckBox_Style">'+this.options.noText+"</th>"+v+'<th class="sortable_Operation_Style">'+this.options.operationText+"</th>");t.append(w);var x=a('<tbody id="table_body_'+this.elementId+'_inactive"  class="sortable_Tbody_Style"></tbody>');r.append(x),b.append(r),this.tableBodyInactiveElement=x,r.hide().addClass("hide")}this.prepareModelData()},buildSortTable:function(){var b=this,c={axis:"y",cursor:"s-resize",opacity:.8,connectWith:".sortable_Tbody_Style",stop:function(a,c){b.recordNewOrder(),b.refreshData(),c.item.removeAttr("style"),b.recordChanged(),b.options.onlineMode&&""!=b.options.saveOrderURL&&b.options.autoSave&&b.saveOrderFunction()}};this.options.groupMode?this.sortableObj=a("#table_body_"+this.elementId+",#table_body_"+this.elementId+"_inactive").sortable(c):this.sortableObj=a(this.tableBodyElement).sortable(c)},recordNewOrder:function(){var b=[],c=this,d=1;a.each(a(this.element).find("tr .hid_sortable_id"),function(e,f){a.each(c.options.sortJsonData,function(c,e){a(f).val()==e.id&&(e.index=d++,b.push(e))})}),this.options.sortJsonData=b},refreshData:function(){this.activedData=[],this.inactivedData=[];var b=[],c=a(this.tableBodyElement),d=a(this.tableBodyInactiveElement),e=this.activedData,f=this.inactivedData,g=this;return a.each(this.options.sortJsonData,function(h,i){var j=g.escapeHtml(a.trim(i.value)),k=g.escapeHtml(a.trim(i.key)),l=a.trim(i.id),m=i.isActiveFlag,n=a.trim(i.index),o=a(g.element).find("#tr_sortable_item_"+g.elementId+"_"+l);if(0==o.length){var p="";p=g.options.keyValueMode?'<td class="sortable_Code_Style" title="'+k+'"><span class="sortable_read_only_key">'+k+'</span><input type="text" class="hid_sortable_key sortable_text_key hide" maxlength="'+g.options.maxCodeLength+'" id="hid_sortable_key_'+l+'" value="'+k+'" /></td><td class="sortable_Descrption_Style" title="'+j+'"><span class="sortable_read_only_text">'+j+'</span><input type="text" class="hid_sortable_value sortable_text_value hide" maxlength="'+g.options.maxDescriptionLength+'" id="hid_sortable_value_'+l+'" value="'+j+'"/></td>':'<td class="sortable_Descrption_only_Style" title="'+j+'"><span class="sortable_read_only_text">'+j+'</span><input type="text" class="hid_sortable_value sortable_text_value hide" maxlength="'+g.options.maxDescriptionLength+'" id="hid_sortable_value_'+l+'" value="'+j+'"/></td>';var q="",r="",s="",t="",u="",v="";g.options.editButton&&(q=g.getButtonHtml("edi"),r=g.getButtonHtml("sav"),s=g.getButtonHtml("can")),g.options.deleteButton&&g.options.inlineDeleteButton&&(t=g.getButtonHtml("del")),g.options.activeButton&&g.options.inlineActiveButton&&(u=g.getButtonHtml("act")),g.options.batchMode&&(v=g.options.groupMode?m?'<td class="sortable_CheckBox_Style"><input type="checkbox" class="td_sortable_checkbox" id="td_sortable_checkbox_'+l+'"/></td>':'<td class="sortable_CheckBox_Style"><input type="checkbox" class="td_sortable_checkbox_inactive" id="td_sortable_checkbox_'+l+'"/></td>':'<td class="sortable_CheckBox_Style"><input type="checkbox" class="td_sortable_checkbox" id="td_sortable_checkbox_'+l+'"/></td>');var w=a('<tr class="ui-state-default sortable_Tbody_Tr_Style" id="tr_sortable_item_'+g.elementId+"_"+l+'">'+v+'<td class="sortable_index sortable_CheckBox_Style">'+n+"</td>"+p+'<td class="sortable_Operation_Style">'+q+r+s+t+u+'<input type="hidden" class="hid_sortable_id" id="hid_sortable_id_'+l+'" value="'+l+'"/></td></tr>');g.options.groupMode?m?c.append(w):d.append(w):c.append(w),b.push(w),o=a(g.element).find("#tr_sortable_item_"+g.elementId+"_"+l)}if(g.options.keyValueMode){var x=o.find(".hid_sortable_key");k!=x.val()&&x.val(k);var y=o.find(".sortable_read_only_key");y.html(k),y.parents("td").attr("title",k)}var z=o.find(".hid_sortable_value");j!=z.val()&&z.val(j);var A=o.find(".sortable_read_only_text");A.html(j),A.parents("td").attr("title",j);var B=o.find(".sortable_index");n!=B.html()&&B.html(n),m?(e.push(a("#tr_sortable_item_"+g.elementId+"_"+l)),o.removeClass("ui-state-disabled")):(f.push(a("#tr_sortable_item_"+g.elementId+"_"+l)),o.addClass("ui-state-disabled")),g.options.groupMode&&(m?(d.find(o),c.append(o)):(c.find(o).remove(),d.append(o))),"undefined"!=typeof o&&null!==o&&o.addClass("sortable-processed")}),a(this.tableBodyElement).find("tr").remove(":not(.sortable-processed)"),a(this.tableBodyElement).find("tr").removeClass("sortable-processed"),a(this.tableBodyInactiveElement).find("tr").remove(":not(.sortable-processed)"),a(this.tableBodyInactiveElement).find("tr").removeClass("sortable-processed"),this.refreshItemsDisplay(),this.cleanCheckbox(),b},getOrSetModelData:function(b){if("undefined"==typeof b||null===b){var c=JSON.parse(JSON.stringify({sortJsonData:this.options.sortJsonData,activedData:this.activedData,inactivedData:this.inactivedData,newAddedItems:this.newAddedItemsArr,deletedItems:this.deletedItemsArr}));return this.newAddedItemsArr=[],this.deletedItemsArr=[],c}this.options=a.extend({},this.options,b),this.init()},activeInactiveFunction:function(b,c){var d=this;if(c){var i=this.getSelectItems(),j=i.checkedItems,k=[],l=[];a.each(j,function(b,c){var e=d.findDataFromModel(a.trim(c.find(".hid_sortable_id").val()));if(k.push(e),l[b]=JSON.stringify(e),!d.options.onlineMode||""==d.options.activeURL){var f=e.isActiveFlag;f?e.isActiveFlag=!1:e.isActiveFlag=!0}}),this.options.onlineMode&&""!=this.options.activeURL?(this.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{activeInactiveRecord:l},url:d.options.activeURL,complete:function(){d.options.unblockfunction()},success:function(b){"success"==b.status?(a.each(k,function(a,b){var c=b.isActiveFlag;c?b.isActiveFlag=!1:b.isActiveFlag=!0}),d.refreshData(),d.options.groupMode&&(d.recordNewOrder(),d.refreshData())):b.message&&d.showAlertMessage(b.message)}})):(d.refreshData(),d.options.groupMode&&(d.recordNewOrder(),d.refreshData()))}else{var e=a(b.target).parents("tr");if("undefined"!=typeof e&&null!==e){var f=this.findDataFromModel(a.trim(e.find(".hid_sortable_id").val()));if(this.options.onlineMode&&""!=this.options.activeURL){this.options.blockfunction();var g=[];g[0]=JSON.stringify(f),a.ajax({type:"POST",dataType:"json",data:{activeInactiveRecord:g},url:d.options.activeURL,complete:function(){d.options.unblockfunction()},success:function(a){if("success"==a.status){var b=f.isActiveFlag;b?f.isActiveFlag=!1:f.isActiveFlag=!0}else a.message&&d.showAlertMessage(a.message);d.refreshData(),d.options.groupMode&&(d.recordNewOrder(),d.refreshData())}})}else{var h=f.isActiveFlag;h?f.isActiveFlag=!1:f.isActiveFlag=!0,d.refreshData(),d.options.groupMode&&(d.recordNewOrder(),d.refreshData())}}}},getSelectItems:function(){var b=a(this.element).find("tr .td_sortable_checkbox"),c=a(this.element).find("tr .td_sortable_checkbox_inactive"),d=[],e=[];return a.each(b,function(b,c){a(c).prop("checked")?d.push(a(c).parents("tr")):e.push(a(c).parents("tr"))}),a.each(c,function(b,c){a(c).prop("checked")?d.push(a(c).parents("tr")):e.push(a(c).parents("tr"))}),{checkedItems:d,uncheckedItems:e}},findDataFromModel:function(b){var c=null;return a.each(this.options.sortJsonData,function(a,d){return d.id==b?(c=d,!1):void 0}),c},editFunction:function(b,c){this.isEditMode=!0,this.changeEditModeButtonsStatus(b);var d=null;d=a(b).is("tr")?a(b):a(b.target).parents("tr");var e=d.find(".hid_sortable_value"),f=d.find(".hid_sortable_key");f.parents("td").removeClass("has-error"),e.parents("td").removeClass("has-error");var g=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));e.val(g.value),d.find(".sortable_read_only_text").hide(),e.show().removeClass("hide"),this.options.keyValueMode&&(f.val(g.key),d.find(".sortable_read_only_key").hide(),f.show().removeClass("hide"))},saveOrderFunction:function(b,c){var d=this;if(this.options.onlineMode&&""!=this.options.saveOrderURL){var e=[];a.each(d.options.sortJsonData,function(a,b){e[a]=JSON.stringify(b)}),d.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{saveOrder:e},url:d.options.saveOrderURL,complete:function(){d.options.unblockfunction()},success:function(a){"success"==a.status?(d.showSuccessMessage("Save success!"),d.recordOrderClear(),d.options.submitCallBack(b)):a.message&&d.showAlertMessage(a.message)}})}else"function"==typeof d.options.submitCallBack?(d.recordOrderClear(),d.options.submitCallBack(b)):a.error("SubmitCallBack "+d.options.submitCallBack+" is not a function!")},saveFunction:function(b,c){var d=a(b.target).parents("tr");if("undefined"!=typeof d&&null!==d){var e=d.find(".hid_sortable_value"),f=null,g=a.trim(e.val()),h=null,i=!0;if(this.options.valueNotNull&&(e.parents("td").removeClass("has-error"),this.options.keyValueMode?(f=d.find(".hid_sortable_key"),f.parents("td").removeClass("has-error"),h=a.trim(f.val()),""==h&&(f.parents("td").addClass("has-error"),i=!1),""==g&&(e.parents("td").addClass("has-error"),i=!1)):""==g&&(e.parents("td").addClass("has-error"),i=!1),!i))return!1;var j=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));if(this.options.onlineMode&&""!=this.options.saveURL){var k=j.key,l=j.value;j.value=g,this.options.keyValueMode&&(j.key=h);var m=this;this.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{saveRecord:JSON.stringify(j)},url:m.options.saveURL,complete:function(){m.options.unblockfunction()},success:function(a){"success"==a.status?(e.val(j.value),d.find(".sortable_read_only_text").show().removeClass("hide"),e.hide().addClass("hide"),m.options.keyValueMode&&(f.val(j.key),d.find(".sortable_read_only_key").show().removeClass("hide"),f.hide().addClass("hide")),m.isEditMode=!1,m.changeEditModeButtonsStatus(b),m.refreshData(),j.newAddedFlag&&(a.data.primaryKey&&(j.primaryKey=a.data.primaryKey),m.newAddedItemsArr.push(j),delete j.newAddedFlag),m.showSuccessMessage("Update sucessful!")):(j.value=l,j.key=k,a.message&&m.showAlertMessage(a.message))}})}else this.isEditMode=!1,this.changeEditModeButtonsStatus(b),j.value=g,this.options.keyValueMode&&(j.key=h),e.val(j.value),d.find(".sortable_read_only_text").show().removeClass("hide"),e.hide().addClass("hide"),this.options.keyValueMode&&(f.val(j.key),d.find(".sortable_read_only_key").show().removeClass("hide"),f.hide().addClass("hide")),this.refreshData(),j.newAddedFlag&&(this.newAddedItemsArr.push(j),delete j.newAddedFlag)}},cancelFunction:function(b,c){this.isEditMode=!1,this.changeEditModeButtonsStatus(b);var d=null;if(d=a(b).is("tr")?a(b):a(b.target).parents("tr"),"undefined"!=typeof d&&null!==d){var e=this.findDataFromModel(a.trim(d.find(".hid_sortable_id").val()));e.newAddedFlag?(this.deleteDataFromModel(e.id),d.remove()):(d.find(".hid_sortable_value").val(e.value),d.find(".sortable_read_only_text").show().removeClass("hide"),d.find(".hid_sortable_value").hide().addClass("hide"),this.options.keyValueMode&&(d.find(".hid_sortable_key").val(e.key),d.find(".sortable_read_only_key").show().removeClass("hide"),d.find(".hid_sortable_key").hide().addClass("hide")))}this.refreshData()},deleteDataFromModel:function(a){for(var b=-1,c=0;c<this.options.sortJsonData.length;c++)if(this.options.sortJsonData[c].id==a){b=c;break}b>=0&&this.options.sortJsonData.splice(b,1)},saveOrderAfterDelete:function(){var b=this;if(this.options.onlineMode&&""!=this.options.saveOrderURL){var c=[];a.each(b.options.sortJsonData,function(a,b){c[a]=JSON.stringify(b)}),a.ajax({type:"POST",dataType:"json",data:{saveOrder:c},url:b.options.saveOrderURL,complete:function(){b.options.unblockfunction()},success:function(a){"success"==a.status?b.showSuccessMessage("Delete sucessful!"):a.message&&b.showAlertMessage(a.message)}})}},deleteFunction:function(b,c){var d=this;"function"==typeof this.options.deleteCallBack?this.options.deleteCallBack(function(){if(c){var i=d.getSelectItems(),j=i.checkedItems,k=[],l=[];a.each(j,function(b,c){var e=d.findDataFromModel(a.trim(c.find(".hid_sortable_id").val()));if(k.push(e),l[b]=JSON.stringify(e),!d.options.onlineMode||""==d.options.deleteURL){d.deleteDataFromModel(e.id),c.remove();var f=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==e.id?(d.newAddedItemsArr.splice(a,1),f=!0,!1):void 0}),f||d.deletedItemsArr.push(e)}}),d.options.onlineMode&&""!=d.options.deleteURL?(d.options.blockfunction(),a.ajax({type:"POST",dataType:"json",data:{deleteRecord:l},url:d.options.deleteURL,success:function(b){"success"==b.status?(a.each(k,function(b,c){d.deleteDataFromModel(c.id),a("#tr_sortable_item_"+d.elementId+"_"+c.id).remove();var e=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==c.id?(d.newAddedItemsArr.splice(a,1),e=!0,!1):void 0}),e||d.deletedItemsArr.push(c)}),d.recordNewOrder(),d.refreshData(),d.saveOrderAfterDelete()):b.message&&d.showAlertMessage(b.message)}})):(d.recordNewOrder(),d.refreshData()),d.selectNumber=0,d.batchModeButtonStatus()}else{var e=a(b.target).parents("tr");if("undefined"!=typeof e&&null!==e){var f=d.findDataFromModel(a.trim(e.find(".hid_sortable_id").val()));if(d.options.onlineMode&&""!=d.options.deleteURL){d.options.blockfunction();var g=[];g[0]=JSON.stringify(f),a.ajax({type:"POST",dataType:"json",data:{deleteRecord:g},url:d.options.deleteURL,success:function(b){if("success"==b.status){d.deleteDataFromModel(f.id),e.remove();var c=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==f.id?(d.newAddedItemsArr.splice(a,1),c=!0,!1):void 0}),c||d.deletedItemsArr.push(f),d.recordNewOrder(),d.refreshData(),e=null,d.saveOrderAfterDelete()}else b.message&&d.showAlertMessage(b.message)}})}else{d.deleteDataFromModel(f.id),e.remove();var h=!1;a.each(d.newAddedItemsArr,function(a,b){return b.id==f.id?(d.newAddedItemsArr.splice(a,1),h=!0,!1):void 0}),h||d.deletedItemsArr.push(f),d.recordNewOrder(),d.refreshData(),d.selectedItem=null}}}}):a.error("DeleteCallBack "+this.options.deleteCallBack+" is not a function!")},addItemFunction:function(){var b=this.startIndex;b<this.options.sortJsonData.length&&(b=this.options.sortJsonData.length);var c=++b,d=this.getOneItemJsonObj(this.options.defaultNewItemKey,this.options.sortJsonData.length+1,c,this.options.enableNewItem,this.options.defaultNewItemText,!0);this.options.sortJsonData.push(d);var e=this.refreshData();this.editFunction(e[0]),this.startIndex=b,this.options.groupMode?(this.options.enableNewItem?(a("#"+this.elementId+"_tab-active-li").click(),a(this.tableBodyElement).animate({scrollTop:"800px"},300)):(a("#"+this.elementId+"_tab-inactive-li").click(),a(this.tableBodyInactiveElement).animate({scrollTop:"800px"},300)),this.recordNewOrder(),this.refreshData()):a(this.tableBodyElement).animate({scrollTop:"800px"},300)},getOneItemJsonObj:function(a,b,c,d,e,f){return{index:b,id:c,key:a,isActiveFlag:d,value:e,newAddedFlag:f}},batchModeButtonStatus:function(){this.selectNumber>0?this.enableBatchButtonDelegate():this.disableBatchJobButtonDelegate()},changeEditModeButtonsStatus:function(a){this.isEditMode?this.enterEditModeButtonsStatusDelegate(a):this.exitEditModeButtonsStatusDelegate(a)},groupButtonClick:function(b){b?(a("#"+this.elementId+"_tab-inactive-li").parent().removeClass("r-tabs-state-active"),a("#"+this.elementId+"_tab-inactive-li").parent().addClass("r-tabs-state-default"),a("#"+this.elementId+"_tab-active-li").parent().addClass("r-tabs-state-active"),a("#"+this.elementId+"_tab-active-li").parent().removeClass("r-tabs-state-default"),a("#"+this.elementId+"_acitveInactiveItems").val(this.options.deactiveButtonText),a("."+this.elementId+"_acitveInactiveItem").val(this.options.deactiveButtonText),a("#table_"+this.elementId).show().removeClass("hide"),a("#table_"+this.elementId+"_inactive").hide().addClass("hide")):(a("#"+this.elementId+"_tab-inactive-li").parent().addClass("r-tabs-state-active"),a("#"+this.elementId+"_tab-inactive-li").parent().removeClass("r-tabs-state-default"),a("#"+this.elementId+"_tab-active-li").parent().removeClass("r-tabs-state-active"),a("#"+this.elementId+"_tab-active-li").parent().addClass("r-tabs-state-default"),a("#"+this.elementId+"_acitveInactiveItems").val(this.options.activeButtonText),a("."+this.elementId+"_acitveInactiveItem").val(this.options.activeButtonText),a("#table_"+this.elementId).hide().addClass("hide"),a("#table_"+this.elementId+"_inactive").show().removeClass("hide")),this.cleanCheckbox()},refreshItemsDisplay:function(){this.sortableObj.sortable("option","items","tr"),this.sortableObj.sortable("refresh")},getButtonHtml:function(a){var b="",c="sortable_button_default btn "+this.options.buttonClass;switch(a){case"acts":b='<li><input type="button" class="btn-inactive '+c+'" id="'+this.elementId+'_acitveInactiveItems" value="'+this.options.deactiveButtonText+'"/></li>';break;case"act":b='<input type="button" class="btn-primary '+this.elementId+"_acitveInactiveItem "+c+'" value="'+this.options.deactiveButtonText+'"/>';break;case"add":b='<li><input type="button" class="btn-primary '+c+'" id="'+this.elementId+'_addItem" value="'+this.options.addButtonText+'"/></li>';break;case"dels":b='<li><input type="button" class="btn-inactive '+c+'" id="'+this.elementId+'_deleteItems" value="'+this.options.deleteButtonText+'"/></li>';break;case"del":b='<input type="button" class="btn-primary '+this.elementId+"_deleteItem "+c+'" value="'+this.options.deleteButtonText+'"/>';break;case"sub":b=this.options.onlineMode?'<li><input type="button" class="btn-inactive '+c+'" id="'+this.elementId+'_saveOrder" value="'+this.options.saveOrderButtonText+'"/></li>':'<li><input type="button" class="btn-primary '+c+'" id="'+this.elementId+'_saveOrder" value="'+this.options.saveOrderButtonText+'"/></li>';break;case"edi":b='<input type="button" class="btn-primary '+this.elementId+"_editItem "+c+'" value="'+this.options.editButtonText+'"/>';break;case"sav":b='<input type="button" class="btn-primary '+this.elementId+"_saveItem hide "+c+'" value="'+this.options.saveButtonText+'"/>';break;case"can":b='<input type="button" class="btn-primary btn-danger '+this.elementId+"_cancelItem hide "+c+'" value="'+this.options.cancelButtonText+'"/>'}return b},cleanCheckbox:function(){var b=a(this.element).find("tr .td_sortable_checkbox"),c=a(this.element).find("tr .td_sortable_checkbox_inactive"),d=a(this.element).find(".checkAll_inactive"),e=a(this.element).find(".checkAll");d.prop("checked",!1),e.prop("checked",!1),a.each(b,function(b,c){a(c).prop("checked",!1)}),a.each(c,function(b,c){a(c).prop("checked",!1)}),this.selectNumber=0,this.batchModeButtonStatus()},prepareModelData:function(){var b=0,c=1;this.options.sortJsonData.sort(this.sortBy("index",!1,parseInt)),a.each(this.options.sortJsonData,function(a,d){d.id=b++,d.index=c++}),this.startIndex=b},enterEditModeButtonsStatusDelegate:function(b){a(b).is("tr")?(a(b).find("."+this.elementId+"_saveItem").show().removeClass("hide"),a(b).find("."+this.elementId+"_cancelItem").show().removeClass("hide"),a(b).find("."+this.elementId+"_deleteItem").hide().addClass("hide"),a(b).find("."+this.elementId+"_acitveInactiveItem").hide().addClass("hide"),a(b).find("."+this.elementId+"_editItem").hide().addClass("hide")):(a(b.target).parents("td").find("."+this.elementId+"_saveItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_cancelItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_deleteItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_acitveInactiveItem").hide().addClass("hide"),a(b.target).hide().addClass("hide"))},exitEditModeButtonsStatusDelegate:function(b){a(b.target).parents("td").find("."+this.elementId+"_saveItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_cancelItem").hide().addClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_editItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_deleteItem").show().removeClass("hide"),a(b.target).parents("td").find("."+this.elementId+"_acitveInactiveItem").show().removeClass("hide")},enableBatchButtonDelegate:function(){a("#"+this.elementId+"_acitveInactiveItems").removeClass("btn-inactive").addClass("btn-primary"),a("#"+this.elementId+"_deleteItems").removeClass("btn-inactive").addClass("btn-primary")},disableBatchJobButtonDelegate:function(){a("#"+this.elementId+"_deleteItems").addClass("btn-inactive").removeClass("btn-primary"),a("#"+this.elementId+"_acitveInactiveItems").addClass("btn-inactive").removeClass("btn-primary")},recordChanged:function(){a("#"+this.elementId+"_saveOrder").removeClass("btn-inactive").addClass("btn-primary")},showAlertMessage:function(b){a("#jSortable_AlertBody_"+this.elementId).empty(),a("#jSortable_AlertBody_"+this.elementId).html(b),a("#jSortable_ErrorMsg_"+this.elementId).show()},hideAlertMessage:function(){a("#jSortable_AlertBody_"+this.elementId).empty(),a("#jSortable_ErrorMsg_"+this.elementId).hide()},showSuccessMessage:function(b){a("#jSortable_SuccessBody_"+this.elementId).empty(),a("#jSortable_SuccessBody_"+this.elementId).html(b),a("#jSortable_SuccessMsg_"+this.elementId).show()},hideSuccessMessage:function(){a("#jSortable_SuccessBody_"+this.elementId).empty(),a("#jSortable_SuccessMsg_"+this.elementId).hide()},recordOrderClear:function(){a("#"+this.elementId+"_saveOrder").addClass("btn-inactive").removeClass("btn-primary")},sortBy:function(a,b,c){return b=b?-1:1,function(d,e){return d=d[a],e=e[a],"undefined"!=typeof c&&(d=c(d),e=c(e)),e>d?-1*b:d>e?1*b:1}},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(a).replace(/[&<>"'\/]/g,function(a){return b[a]})}};var f=function(a,b){"undefined"!=typeof a&&null!==a&&a.length>1&&(a[1].options[b]=a[0])},g=function(a,b){return"undefined"!=typeof a&&null!==a?a.length>1?a[1][b].call(a[1],a[0]):a[0][b].call(a[0]):void 0},h={Destroy:function(){var c=a.data(this,"plugin_"+b);c&&(a(c.element).empty(),a.removeData(this,"plugin_"+b))},ModelData:function(){var a=arguments;return g(a,"getOrSetModelData")},SubmitCallback:function(){var a=arguments;f(a,"submitCallBack")},DeleteCallBack:function(){var a=arguments;f(a,"deleteCallBack")}};a.fn[b]=function(){var c=arguments,d=null;return this.each(function(){if(a.data(this,"plugin_"+b)){var f=c[0];if(h[f])f=h[f],arguments=Array.prototype.slice.call(c,1),arguments.push(a.data(this,"plugin_"+b)),d=f.apply(this,arguments);else if("object"!=typeof f&&f)return a.error("Method"+f+"does not exist on jQuery."+b),this}else a.data(this,"plugin_"+b,new e(this,c[0]))}),"undefined"!=typeof d&&null!==d?d:this}});